<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="../css/membership.css" />
    <script defer src="../js/membership.js"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <title>회원가입</title>

    <script>
        function membership(){
            let $form = document.getElementById('form_membership');

            if(!$form.checkValidity()){
                $form.reportValidity();
                return false;
            }

            axios({
                method : 'post',
                url : 'http://localhost:8000/user/membership',
                data : {
                    $userId : form.id.value,
                    $userPw : form.pswd1.value,
                    $userName : form.name.value,
                    $nickName : form.nick.value,
                    $mobile : form.mobile.value,
                    $email : form.email.value,
                    $gender : form.gender.value,
                    $birthday : form.bir_yy.value + form.bir_mm.value + form.bir_dd.value
                }
            }).then((rep) => {
                return rep.data;
            }).then((data) => {
                alert('회원가입을 축하드립니다.');
                document.location.href = 'http://localhost:8000/';
            });
        }
    </script>
</head>

<body>
    <div id="membership">
        <div id="header">
            <a href="#" target="_blank">
                <img id="logo" src="../image/logo-5.png" alt="logo">
            </a>
        </div>

        <div id="container">
            <form id="form_membership">
                <div id="content">
                    <!-- 아이디 -->
                    <div>
                        <h3 class="join_title">
                            <label for="id">아이디</label>
                        </h3>
                        <span class="box int_id">
                            <input type="text" name="id" id="id" class="int" maxlength="20" required onfocus="outline(this);">
                        </span>
                        <span class="error_next_box"></span>

                    </div>


                    <!-- 비밀번호 -->
                    <div>
                        <h3 class="join_title"><label for="pswd1">비밀번호</label></h3>
                        <span class="box int_pass">
                            <input type="password" name="pswd1" id="pswd1" class="int" maxlength="20" required>
                            <span id="alertTxt">사용불가</span>
                            <img src="../image/icon/check-1.png" id="pswd1_img1" class="pswdImg">
                        </span>
                        <span class="error_next_box"></span>
                    </div>


                    <!-- 비밀번호 재확인 -->
                    <div>
                        <h3 class="join_title"><label for="pswd2">비밀번호 재확인</label></h3>
                        <span class="box int_pass_check">
                            <input type="password" name="pswd2" id="pswd2" class="int" maxlength="20" required>
                            <img src="../image/icon/check-1-2.png" id="pswd2_img1" class="pswdImg">
                        </span>
                        <span class="error_next_box"></span>
                    </div>


                    <!-- 이름 -->
                    <div>
                        <h3 class="join_title"><label for="name">이름</label></h3>
                        <span class="box int_name">
                            <input type="text" name="name" id="name" class="int" maxlength="20" required>
                        </span>
                        <span class="error_next_box"></span>
                    </div>

                    <!-- 닉네임 -->
                    <div>
                        <h3 class="join_title">
                            <label for="nick">닉네임</label>
                        </h3>
                        <span class="box int_nick">
                            <input type="text" name="nick" id="nick" class="int" maxlength="20" required>
                        </span>
                        <span class="error_next_box"></span>
                    </div>


                    <!-- 전화번호 -->
                    <div>
                        <h3 class="join_title"><label for="mobile">휴대전화</label></h3>
                        <span class="box int_mobile">
                            <input type="tel" name="mobile" id="mobile" class="int" maxlength="16" placeholder="전화번호 입력" required>
                        </span>
                        <span class="error_next_box"></span>
                    </div>          
                    
                    
                    <!-- 이메일 -->
                    <div>
                        <h3 class="join_title"><label for="email">이메일</label>
                        </h3>
                        <span class="box int_email">
                            <input type="text" name="email" id="email" class="int" maxlength="100" placeholder="선택입력" required>
                        </span>
                        <span class="error_next_box">이메일 주소를 다시 확인해주세요.</span>
                    </div>                    


                    <!-- 성별 -->
                    <div>
                        <h3 class="join_title"><label for="gender">성별</label></h3>
                        <span class="box gender_code">
                            <select name="gender" id="gender" class="sel" required>
                                <option>성별</option>
                                <option value="M">남자</option>
                                <option value="F">여자</option>
                            </select>
                        </span>
                        <span class="error_next_box">필수 정보입니다.</span>
                    </div>



                    <!-- 생년월일 -->
                    <div>
                        <h3 class="join_title"><label for="yy">생년월일</label></h3>

                        <div id="bir_wrap">
                            <!-- 년도 -->
                            <div id="bir_yy">
                                <span class="box">
                                    <input type="text" name="bir_yy" id="yy" class="int" maxlength="4" placeholder="년(4자)" required>
                                </span>
                            </div>

                            <!-- 월 -->
                            <div id="bir_mm">
                                <span class="box">
                                    <select name="bir_mm" id="mm" class="sel">
                                        <option>월</option>
                                        <option value="01">1</option>
                                        <option value="02">2</option>
                                        <option value="03">3</option>
                                        <option value="04">4</option>
                                        <option value="05">5</option>
                                        <option value="06">6</option>
                                        <option value="07">7</option>
                                        <option value="08">8</option>
                                        <option value="09">9</option>
                                        <option value="10">10</option>
                                        <option value="11">11</option>
                                        <option value="12">12</option>
                                    </select>
                                </span>
                            </div>

                            <!-- 일 -->
                            <div id="bir_dd">
                                <span class="box">
                                    <input type="text" name="bir_dd" id="dd" class="int" maxlength="2" placeholder="일" required>
                                </span>
                            </div>

                        </div>
                        <span class="error_next_box"></span>
                    </div>                    


                    <!-- 가입하기 -->
                    <div class="btn_area">
                        <button type="button" id="btnJoin" onclick="membership();">
                            <span>가입하기</span>
                        </button>
                    </div>

                    <div>
                        <span class="copy">
                            <br>
                        </span>
                    </div>
                </div>
            </form>
        </div>
    </div>
    <script>
        $(document).ready(function () {
            $("input").focus(function () {
                $(this.parentNode).css('border', '1px solid #0359AE');
            })

            $("input").blur(function () {
                $(this.parentNode).css('border', '1px solid #dadada');
            })
        })

        $(document).ready(function () {
            $("select").focus(function () {
                $(this.parentNode).css('border', '1px solid #0359AE');
            })

            $("select").blur(function () {
                $(this.parentNode).css('border', '1px solid #dadada');
            })
        })
    </script>
</body>

</html>